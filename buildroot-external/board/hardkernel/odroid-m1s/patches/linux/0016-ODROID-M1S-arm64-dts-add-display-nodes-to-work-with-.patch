From 34aec6e091b334e0dc7c0d04114855f5aefde63b Mon Sep 17 00:00:00 2001
From: Dongjin Kim <tobetter@gmail.com>
Date: Tue, 2 Jan 2024 13:05:40 +0900
Subject: [PATCH] ODROID-M1S: arm64/dts: add display nodes to work with
 Hardkernel's stock U-Boot

Change-Id: Ie8411e26cb053160cda0a545c0e3302e1e5d575e
---
 .../boot/dts/rockchip/rk3566-odroid-m1s.dts   | 39 ++++++++++++++++++-
 1 file changed, 38 insertions(+), 1 deletion(-)

diff --git a/arch/arm64/boot/dts/rockchip/rk3566-odroid-m1s.dts b/arch/arm64/boot/dts/rockchip/rk3566-odroid-m1s.dts
index ebe0a8d96fd5..9e8ec946b4cd 100644
--- a/arch/arm64/boot/dts/rockchip/rk3566-odroid-m1s.dts
+++ b/arch/arm64/boot/dts/rockchip/rk3566-odroid-m1s.dts
@@ -309,9 +309,18 @@ &hdmi {
 };
 
 &hdmi_in {
-	hdmi_in_vp0: endpoint {
+	#address-cells = <1>;
+	#size-cells = <0>;
+
+	hdmi_in_vp0: endpoint@0 {
+		reg = <0>;
 		remote-endpoint = <&vp0_out_hdmi>;
 	};
+
+	hdmi_in_vp1: endpoint@1 {
+		reg = <1>;
+		remote-endpoint = <&vp1_out_hdmi>;
+	};
 };
 
 &hdmi_out {
@@ -797,6 +806,7 @@ &usb2phy1_otg {
 };
 
 &vop {
+	compatible = "rockchip,rk3568-vop", "rockchip,rk3566-vop";
 	assigned-clocks = <&cru DCLK_VOP0>, <&cru DCLK_VOP1>;
 	assigned-clock-parents = <&pmucru PLL_HPLL>, <&cru PLL_VPLL>;
 	status = "okay";
@@ -818,4 +828,31 @@ vp1_out_dsi0: endpoint@ROCKCHIP_VOP2_EP_MIPI0 {
 		reg = <ROCKCHIP_VOP2_EP_MIPI0>;
 		remote-endpoint = <&dsi0_in_vp1>;
 	};
+
+	vp1_out_hdmi: endpoint@ROCKCHIP_VOP2_EP_HDMI0 {
+		reg = <ROCKCHIP_VOP2_EP_HDMI0>;
+		remote-endpoint = <&hdmi_in_vp1>;
+	};
+};
+
+&display_subsystem {
+	route {
+		route_dsi0: route-dsi0 {
+			status = "disabled";
+			logo,uboot = "logo.bmp";
+			logo,kernel = "logo_kernel.bmp";
+			logo,mode = "center";
+			charge_logo,mode = "center";
+			connect = <&vp1_out_dsi0>;
+		};
+
+		route_hdmi: route-hdmi {
+			status = "okay";
+			logo,uboot = "logo.bmp";
+			logo,kernel = "logo_kernel.bmp";
+			logo,mode = "center";
+			charge_logo,mode = "center";
+			connect = <&vp1_out_hdmi>;
+		};
+	};
 };
-- 
2.40.1

